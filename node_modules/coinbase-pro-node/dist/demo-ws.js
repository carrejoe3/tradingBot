"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const CoinbasePro_1 = require("./CoinbasePro");
const WebSocketClient_1 = require("./client/WebSocketClient");
const client = new CoinbasePro_1.CoinbasePro();
const channel = {
    name: WebSocketClient_1.WebSocketChannelName.TICKER,
    product_ids: ['BTC-USD', 'ETH-EUR'],
};
client.ws.on(WebSocketClient_1.WebSocketEvent.ON_OPEN, () => {
    client.ws.subscribe([channel]);
});
client.ws.on(WebSocketClient_1.WebSocketEvent.ON_SUBSCRIPTION_UPDATE, subscriptions => {
    if (subscriptions.channels.length === 0) {
        client.ws.disconnect();
    }
});
client.ws.on(WebSocketClient_1.WebSocketEvent.ON_MESSAGE_TICKER, tickerMessage => {
    console.info(`Received message of type "${tickerMessage.type}".`, tickerMessage);
    client.ws.unsubscribe([
        {
            name: WebSocketClient_1.WebSocketChannelName.TICKER,
            product_ids: [tickerMessage.product_id],
        },
    ]);
});
client.ws.connect({ debug: true });
//# sourceMappingURL=demo-ws.js.map